{
    "$schema": "http://json-schema.org/draft/2019-09/schema",
    "$id": "http://raw.githubusercontent.com/secondlife/lsl-definitions/refs/heads/main/slua_definitions.schema.json",
    "$comment": "This schema defines keywords for the Server Lua Language (SLua) of Second Life.",
    "$defs": {
        "nonNegativeInteger": {
            "minimum": 0,
            "type": "integer"
        },
        "nonNegativeIntegerDefault0": {
            "allOf": [
                { "$ref": "#/$defs/nonNegativeInteger" },
                { "default": 0 }
            ]
        },
        "nonNegativeNumber": {
            "minimum": 0.0,
            "type": "number"
        },
        "positiveInteger": {
            "exclusiveMinimum": 0,
            "type": "integer"
        },
        "zeroToOneNumber": {
            "maximum": 1.0,
            "minimum": 0.0,
            "type": "number"
        },
        "identifier": {
            "pattern": "^[_a-zA-Z][_a-zA-Z0-9]*$",
            "type": "string"
        },
        "type": {
            "markdownDescription": "A luau-format type definition",
            "pattern": "^([ \n?&|,{}\\[\\]()\":a-zA-Z0-9_]|\\.\\.\\.|->)*$",
            "type": "string"
        },
        "property": {
            "markdownDescription": "A property or constant",
            "additionalProperties": false,
            "properties": {
                "name": { "$ref": "#/$defs/identifier" },
                "type": { "$ref": "#/$defs/type" },
                "value": {
                    "markdownDescription": "The value of the constant.",
                    "type": ["integer", "string"]
                },
                "comment": {
                    "markdownDescription": "A brief description of this constant.",
                    "type": "string"
                },
                "slua-removed": {
                    "const": true,
                    "markdownDescription": "This property is only present in Luau, not SLua.",
                    "type": "boolean"
                }
            },
            "required": ["name", "type"],
            "type": "object"
        }

    },
    "additionalProperties": false,
    "properties": {
        "globalVariables": {
            "items": { "$ref": "#/$defs/property" },
            "type": "array"
        },
        "constants": {
            "items": { "$ref": "#/$defs/property" },
            "type": "array"
        },
        "builtinConstants": {
            "items": { "$ref": "#/$defs/property" },
            "type": "array"
        },
        "controls": {
            "additionalProperties": false,
            "patternProperties": {
                "^(?:[a-z]+)$": {
                    "properties": {
                        "tooltip": {
                            "markdownDescription": "A brief description of this control (keyword).",
                            "type": "string"
                        }
                    },
                    "required": [
                        "tooltip"
                    ],
                    "type": "object"
                }
            },
            "type": "object"
        },
        "events": {
            "additionalProperties": false,
            "patternProperties": {
                "^[a-z_]+$": {
                    "additionalProperties": false,
                    "properties": {
                        "arguments": {
                            "items": {
                                "additionalProperties": false,
                                "patternProperties": {
                                    "^(?:[A-Za-z]+(?:_[A-Za-z]+)*)$": {
                                        "properties": {
                                            "tooltip": {
                                                "markdownDescription": "A brief description of this event argument.",
                                                "type": "string"
                                            },
                                            "type": {
                                                "defaultSnippets": [
                                                    {
                                                        "label": "float",
                                                        "body": "float"
                                                    },
                                                    {
                                                        "label": "integer",
                                                        "body": "integer"
                                                    },
                                                    {
                                                        "label": "key",
                                                        "body": "key"
                                                    },
                                                    {
                                                        "label": "list",
                                                        "body": "list"
                                                    },
                                                    {
                                                        "label": "quaternion",
                                                        "body": "quaternion"
                                                    },
                                                    {
                                                        "label": "rotation",
                                                        "body": "rotation"
                                                    },
                                                    {
                                                        "label": "string",
                                                        "body": "string"
                                                    },
                                                    {
                                                        "label": "vector",
                                                        "body": "vector"
                                                    }
                                                ],
                                                "markdownDescription": "One of the valid types for this event argument: [float, integer, key, list, rotation, string, vector].",
                                                "oneOf": [
                                                    { "const": "float" },
                                                    { "const": "integer" },
                                                    { "const": "key" },
                                                    { "const": "list" },
                                                    {
                                                        "$comment": "quaternion is an alias for rotation",
                                                        "const": "quaternion"
                                                    },
                                                    { "const": "rotation" },
                                                    { "const": "string" },
                                                    { "const": "vector" }
                                                ]
                                            }
                                        },
                                        "required": [
                                            "type"
                                        ],
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            },
                            "markdownDescription": "An array of event arguments.",
                            "minItems": 0,
                            "type": "array",
                            "uniqueItems": true
                        },
                        "detected-semantics": {
                            "const": true,
                            "markdownDescription": "Uses llDetected* in LSL and {DetectedEvent} in SLua.",
                            "type": "boolean"
                        },
                        "deprecated": {
                            "const": true,
                            "markdownDescription": "This event has been deprecated.",
                            "type": "boolean"
                        },
                        "slua-deprecated": {
                            "const": true,
                            "markdownDescription": "This event has been deprecated in SLua.",
                            "type": "boolean"
                        },
                        "slua-removed": {
                            "const": true,
                            "markdownDescription": "This event has been removed in SLua.",
                            "type": "boolean"
                        },
                        "tooltip": {
                            "markdownDescription": "A brief description of this event.",
                            "type": "string"
                        }
                    }
                }
            },
            "type": "object"
        },
        "functions": {
            "additionalProperties": false,
            "patternProperties": {
                "^ll[A-Zs](?:[A-Z0-9]*[a-z]*)+$": {
                    "additionalProperties": false,
                    "properties": {
                        "type-arguments": {
                            "items": {
                                "additionalProperties": false,
                                "patternProperties": {
                                    "^(?:[A-Za-z]+)$": {
                                        "markdownDescription": "A type variable name for slua typechecking."
                                    }
                                },
                                "type": "string"
                            },
                            "markdownDescription": "An array of type variable names for slua typechecking.",
                            "type": "array",
                            "uniqueItems": true
                        },
                        "arguments": {
                            "items": {
                                "additionalProperties": false,
                                "patternProperties": {
                                    "^(?:[A-Za-z]+(?:[A-z0-9-_]+)*)$": {
                                        "additionalProperties": false,
                                        "properties": {
                                            "bool-semantics": {
                                                "const": true,
                                                "markdownDescription": "This function argument's integer value represents a boolean value.",
                                                "type": "boolean"
                                            },
                                            "index-semantics": {
                                                "const": true,
                                                "markdownDescription": "This function argument's integer value represents a zero-based index.",
                                                "type": "boolean"
                                            },
                                            "tooltip": {
                                                "markdownDescription": "A brief description of this function argument.",
                                                "type": "string"
                                            },
                                            "type": {
                                                "defaultSnippets": [
                                                    {
                                                        "label": "float",
                                                        "body": "float"
                                                    },
                                                    {
                                                        "label": "integer",
                                                        "body": "integer"
                                                    },
                                                    {
                                                        "label": "key",
                                                        "body": "key"
                                                    },
                                                    {
                                                        "label": "list",
                                                        "body": "list"
                                                    },
                                                    {
                                                        "label": "quaternion",
                                                        "body": "quaternion"
                                                    },
                                                    {
                                                        "label": "rotation",
                                                        "body": "rotation"
                                                    },
                                                    {
                                                        "label": "string",
                                                        "body": "string"
                                                    },
                                                    {
                                                        "label": "vector",
                                                        "body": "vector"
                                                    }
                                                ],
                                                "markdownDescription": "One of the valid types for this function argument:\n- float\n- integer\n- key\n- list\n- rotation\n- string\n- vector",
                                                "oneOf": [
                                                    { "const": "float" },
                                                    { "const": "integer" },
                                                    { "const": "key" },
                                                    { "const": "list" },
                                                    {
                                                        "$comment": "quaternion is an alias for rotation",
                                                        "const": "quaternion"
                                                    },
                                                    { "const": "rotation" },
                                                    { "const": "string" },
                                                    { "const": "vector" }
                                                ]
                                            },
                                            "slua-type": {
                                                "markdownDescription": "A more specific argument type for slua type-checking.",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "type"
                                        ],
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            },
                            "markdownDescription": "An array of function arguments.",
                            "type": "array",
                            "uniqueItems": true
                        },
                        "bool-semantics": {
                            "const": true,
                            "markdownDescription": "The returned integer value represents a boolean value.",
                            "type": "boolean"
                        },
                        "deprecated": {
                            "const": true,
                            "markdownDescription": "This function has been deprecated.",
                            "type": "boolean"
                        },
                        "detected-semantics": {
                            "const": true,
                            "markdownDescription": "This function is wrapped in the DetectedEvent class.",
                            "type": "boolean"
                        },
                        "energy": {
                            "$ref": "#/$defs/nonNegativeNumber",
                            "markdownDescription": "The script energy consumed by this function."
                        },
                        "experience": {
                            "const": true,
                            "markdownDescription": "This function requires an experience to be set for the script to compile.",
                            "type": "boolean"
                        },
                        "func-id": {
                            "$comment": "llSin has 'func-id: 0', so we must include zero",
                            "$ref": "#/$defs/nonNegativeInteger",
                            "markdownDescription": "The LSO function identifier."
                        },
                        "god-mode": {
                            "const": true,
                            "markdownDescription": "This function can only be executed in god mode.",
                            "type": "boolean"
                        },
                        "index-semantics": {
                            "const": true,
                            "markdownDescription": "The returned integer value represents a zero-based index.",
                            "type": "boolean"
                        },
                        "linden-experience": {
                            "const": true,
                            "markdownDescription": "This function requires a Linden-owned experience.",
                            "type": "boolean"
                        },
                        "mono-sleep": {
                            "$ref": "#/$defs/nonNegativeNumber",
                            "markdownDescription": "Sleep in the mono-script runtime."
                        },
                        "must-use": {
                            "const": true,
                            "markdownDescription": "This functions return value should not be discarded but further used.",
                            "type": "boolean"
                        },
                        "native": {
                            "const": true,
                            "markdownDescription": "This function must use a native implementation for non-LSO VMs.",
                            "type": "boolean"
                        },
                        "private": {
                            "const": true,
                            "markdownDescription": "This function should be omitted from the generated documentation.",
                            "type": "boolean"
                        },
                        "pure": {
                            "const": true,
                            "markdownDescription": "This function is guaranteed to have no side effects.",
                            "type": "boolean"
                        },
                        "return": {
                            "default": "void",
                            "defaultSnippets": [
                                {
                                    "label": "float",
                                    "body": "float"
                                },
                                {
                                    "label": "integer",
                                    "body": "integer"
                                },
                                {
                                    "label": "key",
                                    "body": "key"
                                },
                                {
                                    "label": "list",
                                    "body": "list"
                                },
                                {
                                    "label": "quaternion",
                                    "body": "quaternion"
                                },
                                {
                                    "label": "rotation",
                                    "body": "rotation"
                                },
                                {
                                    "label": "string",
                                    "body": "string"
                                },
                                {
                                    "label": "vector",
                                    "body": "vector"
                                },
                                {
                                    "label": "void",
                                    "body": "void"
                                }
                            ],
                            "markdownDescription": "One of the valid return types for functions:\n\n- float\n- integer\n- key\n- list\n- rotation\n- string\n- vector\n- void\n\nIf omitted, it is assumed to be void.",
                            "oneOf": [
                                { "const": "float" },
                                { "const": "integer" },
                                { "const": "key" },
                                { "const": "list" },
                                {
                                    "$comment": "quaternion is an alias for rotation",
                                    "const": "quaternion"
                                },
                                { "const": "rotation" },
                                { "const": "string" },
                                { "const": "vector" },
                                { "const": "void" }
                            ]
                        },
                        "slua-deprecated": {
                            "const": true,
                            "markdownDescription": "This function is deprecated in SLua.",
                            "type": "boolean"
                        },
                        "slua-removed": {
                            "const": true,
                            "markdownDescription": "In SLua, this function has been removed from ll module and only exists in llcompat.",
                            "type": "boolean"
                        },
                        "slua-return": {
                            "markdownDescription": "A more specific return type for slua type-checking.",
                            "type": "string"
                        },
                        "sleep": {
                            "$ref": "#/$defs/nonNegativeNumber",
                            "markdownDescription": "Additional sleep time imposed by the script after this function completes."
                        },
                        "tooltip": {
                            "markdownDescription": "A brief description of this function.",
                            "type": "string"
                        }
                    },
                    "required": [
                        "tooltip"
                    ]
                }
            },
            "type": "object"
        },
        "llsd-lsl-syntax-version": {
            "$ref": "#/$defs/positiveInteger",
            "markdownDescription": "Only increment with file format changes."
        },
        "types": {
            "additionalProperties": false,
            "defaultSnippets": [
                {
                    "label": "float",
                    "body": "float"
                },
                {
                    "label": "integer",
                    "body": "integer"
                },
                {
                    "label": "key",
                    "body": "key"
                },
                {
                    "label": "list",
                    "body": "list"
                },
                {
                    "label": "quaternion",
                    "body": "quaternion"
                },
                {
                    "label": "rotation",
                    "body": "rotation"
                },
                {
                    "label": "string",
                    "body": "string"
                },
                {
                    "label": "vector",
                    "body": "vector"
                }
            ],
            "markdownDescription": "The valid LSL storage types:\n\n- float\n- integer\n- key\n- list\n- rotation\n- string\n- vector",
            "patternProperties": {
                "^(?:float|integer|key|list|quaternion|rotation|string|vector)$": {
                    "properties": {
                        "private": {
                            "const": true,
                            "markdownDescription": "This type should be omitted from the generated documentation.",
                            "type": "boolean"
                        },
                        "tooltip": {
                            "markdownDescription": "A brief description of this type.",
                            "type": "string"
                        }
                    },
                    "required": [
                        "tooltip"
                    ],
                    "type": "object"
                }
            },
            "type": "object"
        }
    },
    "required": [
        "version",
        "baseClasses",
        "typeAliases",
        "classes",
        "globalFunctions",
        "modules",
        "constants",
        "controls",
        "builtinTypes",
        "builtinConstants",
        "builtinFunctions"
    ],
    "title": "Second Life SLua Definitions",
    "type": "object"
}
